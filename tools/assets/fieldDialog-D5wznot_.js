import{c as ge,bz as Ue,bq as be,h as x,a8 as Ae,j as ye,r as v,z as U,o as i,J as $,K as n,Z as Ie,m as H,q as w,p as u,M as te,N as Be,O as J,k as _,l as k,Y as oe,Q as W,W as L,$ as o,ac as Fe,a4 as je,br as Pe,_ as Ve,aj as Te,d as de,P as Ke,bA as Me,g as qe,aP as le,aU as Re,t as We,aD as He,F as Je,H as ze,V as xe,s as pe,b8 as Ge,X as F,n as Qe,a6 as R,L as fe,bl as Xe,R as Ye,a as ae,aR as Ze,by as el}from"./index-DPYi3hip.js";import{m as ll,n as al,h as ce,o as tl,j as ol,E as sl,l as nl}from"./stringFun-COwVJzme.js";import{E as ul}from"./switch-DDjrrs9H.js";/* empty css               *//* empty css            *//* empty css               */import{U as z,I as se,C as he,u as rl,n as il,d as dl,e as pl,E as _e,f as fl}from"./index-CHd2O8eQ.js";const cl=["light","dark"],ml=ge({title:{type:String,default:""},description:{type:String,default:""},type:{type:String,values:Ue(be),default:"info"},closable:{type:Boolean,default:!0},closeText:{type:String,default:""},showIcon:Boolean,center:Boolean,effect:{type:String,values:cl,default:"light"}}),vl={close:d=>d instanceof MouseEvent},gl=x({name:"ElAlert"}),bl=x({...gl,props:ml,emits:vl,setup(d,{emit:j}){const g=d,{Close:e}=Pe,D=Ae(),c=ye("alert"),A=v(!0),V=U(()=>be[g.type]),b=U(()=>[c.e("icon"),{[c.is("big")]:!!g.description||!!D.default}]),I=U(()=>({"with-description":g.description||D.default})),C=p=>{A.value=!1,j("close",p)};return(p,P)=>(i(),$(je,{name:u(c).b("fade"),persisted:""},{default:n(()=>[Ie(H("div",{class:w([u(c).b(),u(c).m(p.type),u(c).is("center",p.center),u(c).is(p.effect)]),role:"alert"},[p.showIcon&&u(V)?(i(),$(u(te),{key:0,class:w(u(b))},{default:n(()=>[(i(),$(Be(u(V))))]),_:1},8,["class"])):J("v-if",!0),H("div",{class:w(u(c).e("content"))},[p.title||p.$slots.title?(i(),_("span",{key:0,class:w([u(c).e("title"),u(I)])},[k(p.$slots,"title",{},()=>[oe(W(p.title),1)])],2)):J("v-if",!0),p.$slots.default||p.description?(i(),_("p",{key:1,class:w(u(c).e("description"))},[k(p.$slots,"default",{},()=>[oe(W(p.description),1)])],2)):J("v-if",!0),p.closable?(i(),_(L,{key:2},[p.closeText?(i(),_("div",{key:0,class:w([u(c).e("close-btn"),u(c).is("customed")]),onClick:C},W(p.closeText),3)):(i(),$(u(te),{key:1,class:w(u(c).e("close-btn")),onClick:C},{default:n(()=>[o(u(e))]),_:1},8,["class"]))],64)):J("v-if",!0)],2)],2),[[Fe,A.value]])]),_:3},8,["name"]))}});var yl=Ve(bl,[["__file","alert.vue"]]);const Vl=Te(yl),Tl=ge({valueKey:{type:String,default:"value"},modelValue:{type:[String,Number],default:""},debounce:{type:Number,default:300},placement:{type:de(String),values:["top","top-start","top-end","bottom","bottom-start","bottom-end"],default:"bottom-start"},fetchSuggestions:{type:de([Function,Array]),default:Ke},popperClass:{type:String,default:""},triggerOnFocus:{type:Boolean,default:!0},selectWhenUnmatched:{type:Boolean,default:!1},hideLoading:{type:Boolean,default:!1},teleported:Me.teleported,highlightFirstItem:{type:Boolean,default:!1},fitInputWidth:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},name:String,...qe(["ariaLabel"])}),hl={[z]:d=>le(d),[se]:d=>le(d),[he]:d=>le(d),focus:d=>d instanceof FocusEvent,blur:d=>d instanceof FocusEvent,clear:()=>!0,select:d=>Re(d)},Se="ElAutocomplete",_l=x({name:Se,inheritAttrs:!1}),Sl=x({..._l,props:Tl,emits:hl,setup(d,{expose:j,emit:g}){const e=d,D=rl(),c=We(),A=il(),V=ye("autocomplete"),b=v(),I=v(),C=v(),p=v();let P=!1,K=!1;const T=v([]),r=v(-1),a=v(""),y=v(!1),f=v(!1),s=v(!1),N=He(),O=U(()=>c.style),h=U(()=>(T.value.length>0||s.value)&&y.value),M=U(()=>!e.hideLoading&&s.value),E=U(()=>b.value?Array.from(b.value.$el.querySelectorAll("input")):[]),G=()=>{h.value&&(a.value=`${b.value.$el.offsetWidth}px`)},Q=()=>{r.value=-1},l=async t=>{if(f.value)return;const m=S=>{s.value=!1,!f.value&&(ae(S)?(T.value=S,r.value=e.highlightFirstItem?0:-1):Ze(Se,"autocomplete suggestions must be an array"))};if(s.value=!0,ae(e.fetchSuggestions))m(e.fetchSuggestions);else{const S=await e.fetchSuggestions(t,m);ae(S)&&m(S)}},ne=dl(l,e.debounce),we=t=>{const m=!!t;if(g(se,t),g(z,t),f.value=!1,y.value||(y.value=m),!e.triggerOnFocus&&!t){f.value=!0,T.value=[];return}ne(t)},Ee=t=>{var m;A.value||(((m=t.target)==null?void 0:m.tagName)!=="INPUT"||E.value.includes(document.activeElement))&&(y.value=!0)},$e=t=>{g(he,t)},Ce=t=>{K?K=!1:(y.value=!0,g("focus",t),e.triggerOnFocus&&!P&&ne(String(e.modelValue)))},ke=t=>{setTimeout(()=>{var m;if((m=C.value)!=null&&m.isFocusInsideContent()){K=!0;return}y.value&&q(),g("blur",t)})},De=()=>{y.value=!1,g(z,""),g("clear")},ue=async()=>{h.value&&r.value>=0&&r.value<T.value.length?X(T.value[r.value]):e.selectWhenUnmatched&&(g("select",{value:e.modelValue}),T.value=[],r.value=-1)},Ne=t=>{h.value&&(t.preventDefault(),t.stopPropagation(),q())},q=()=>{y.value=!1},Oe=()=>{var t;(t=b.value)==null||t.focus()},Le=()=>{var t;(t=b.value)==null||t.blur()},X=async t=>{g(se,t[e.valueKey]),g(z,t[e.valueKey]),g("select",t),T.value=[],r.value=-1},Y=t=>{if(!h.value||s.value)return;if(t<0){r.value=-1;return}t>=T.value.length&&(t=T.value.length-1);const m=I.value.querySelector(`.${V.be("suggestion","wrap")}`),B=m.querySelectorAll(`.${V.be("suggestion","list")} li`)[t],Z=m.scrollTop,{offsetTop:ie,scrollHeight:ee}=B;ie+ee>Z+m.clientHeight&&(m.scrollTop+=ee),ie<Z&&(m.scrollTop-=ee),r.value=t,b.value.ref.setAttribute("aria-activedescendant",`${N.value}-item-${r.value}`)},re=Je(p,()=>{h.value&&q()});return ze(()=>{re==null||re()}),xe(()=>{b.value.ref.setAttribute("role","textbox"),b.value.ref.setAttribute("aria-autocomplete","list"),b.value.ref.setAttribute("aria-controls","id"),b.value.ref.setAttribute("aria-activedescendant",`${N.value}-item-${r.value}`),P=b.value.ref.hasAttribute("readonly")}),j({highlightedIndex:r,activated:y,loading:s,inputRef:b,popperRef:C,suggestions:T,handleSelect:X,handleKeyEnter:ue,focus:Oe,blur:Le,close:q,highlight:Y,getData:l}),(t,m)=>(i(),$(u(Ye),{ref_key:"popperRef",ref:C,visible:u(h),placement:t.placement,"fallback-placements":["bottom-start","top-start"],"popper-class":[u(V).e("popper"),t.popperClass],teleported:t.teleported,"gpu-acceleration":!1,pure:"","manual-mode":"",effect:"light",trigger:"click",transition:`${u(V).namespace.value}-zoom-in-top`,persistent:"",role:"listbox",onBeforeShow:G,onHide:Q},{content:n(()=>[H("div",{ref_key:"regionRef",ref:I,class:w([u(V).b("suggestion"),u(V).is("loading",u(M))]),style:pe({[t.fitInputWidth?"width":"minWidth"]:a.value,outline:"none"}),role:"region"},[o(u(pl),{id:u(N),tag:"ul","wrap-class":u(V).be("suggestion","wrap"),"view-class":u(V).be("suggestion","list"),role:"listbox"},{default:n(()=>[u(M)?(i(),_("li",{key:0},[k(t.$slots,"loading",{},()=>[o(u(te),{class:w(u(V).is("loading"))},{default:n(()=>[o(u(Ge))]),_:1},8,["class"])])])):(i(!0),_(L,{key:1},F(T.value,(S,B)=>(i(),_("li",{id:`${u(N)}-item-${B}`,key:B,class:w({highlighted:r.value===B}),role:"option","aria-selected":r.value===B,onClick:Z=>X(S)},[k(t.$slots,"default",{item:S},()=>[oe(W(S[t.valueKey]),1)])],10,["id","aria-selected","onClick"]))),128))]),_:3},8,["id","wrap-class","view-class"])],6)]),default:n(()=>[H("div",{ref_key:"listboxRef",ref:p,class:w([u(V).b(),t.$attrs.class]),style:pe(u(O)),role:"combobox","aria-haspopup":"listbox","aria-expanded":u(h),"aria-owns":u(N)},[o(u(_e),Qe({ref_key:"inputRef",ref:b},u(D),{clearable:t.clearable,disabled:u(A),name:t.name,"model-value":t.modelValue,"aria-label":t.ariaLabel,onInput:we,onChange:$e,onFocus:Ce,onBlur:ke,onClear:De,onKeydown:[R(fe(S=>Y(r.value-1),["prevent"]),["up"]),R(fe(S=>Y(r.value+1),["prevent"]),["down"]),R(ue,["enter"]),R(q,["tab"]),R(Ne,["esc"])],onMousedown:Ee}),Xe({_:2},[t.$slots.prepend?{name:"prepend",fn:n(()=>[k(t.$slots,"prepend")])}:void 0,t.$slots.append?{name:"append",fn:n(()=>[k(t.$slots,"append")])}:void 0,t.$slots.prefix?{name:"prefix",fn:n(()=>[k(t.$slots,"prefix")])}:void 0,t.$slots.suffix?{name:"suffix",fn:n(()=>[k(t.$slots,"suffix")])}:void 0]),1040,["clearable","disabled","name","model-value","aria-label","onKeydown"])],14,["aria-expanded","aria-owns"])]),_:3},8,["visible","placement","popper-class","teleported","transition"]))}});var wl=Ve(Sl,[["__file","autocomplete.vue"]]);const El=Te(wl),me=[{title:"common_status",name:"common_status"},{title:"defect_status",name:"defect_status"},{title:"defect_tpl",name:"defect_tpl"},{title:"defect_type",name:"defect_type"},{title:"demand_tpl",name:"demand_tpl"},{title:"isOrNot_status",name:"isOrNot_status"},{title:"level_status",name:"level_status"},{title:"org_member_postion_type",name:"org_member_postion_type"},{title:"proj_issue_transition",name:"proj_issue_transition"},{title:"proj_status",name:"proj_status"},{title:"proj_ver_transition",name:"proj_ver_transition"},{title:"risk_status",name:"risk_status"},{title:"task_status",name:"task_status"}],ve=[{title:"role",name:"role"},{title:"demand",name:"demand"},{title:"account",name:"account"},{title:"project_manage",name:"project_manage"}],$l=[{name:"性别",type:"gender"},{name:"数据库int类型",type:"int"},{name:"数据库时间日期类型",type:"time.Time"},{name:"数据库浮点型",type:"float64"},{name:"数据库字符串",type:"string"},{name:"数据库bool类型",type:"bool"}],Cl=[{name:"搜索",type:"search"},{name:"展开搜索",type:"expand"},{name:"不搜索",type:"nosearch"}],kl=Object.assign({name:"FieldDialog"},{__name:"fieldDialog",props:{dialogMiddle:{type:Object,default:function(){return{}}},typeOptions:{type:Array,default:function(){return[]}},typeSearchOptions:{type:Array,default:function(){return[]}},typeIndexOptions:{type:Array,default:function(){return[]}}},setup(d,{expose:j}){const g=d;v([]);const e=v({}),D=v([]),c=v([]);v([]);const V=v({fieldName:[{required:!0,message:"请输入字段英文名",trigger:"blur"}],fieldDesc:[{required:!0,message:"请输入字段中文名",trigger:"blur"}],fieldJson:[{required:!0,message:"请输入字段格式化json",trigger:"blur"}],columnName:[{required:!0,message:"请输入数据库字段",trigger:"blur"}],fieldType:[{required:!0,message:"请选择字段类型",trigger:"blur"}],dataTypeLong:[{validator:(r,a,y)=>{const f=/^('([^']*)'(?:,'([^']+)'*)*)$/;e.value.fieldType=="enum"&&!f.test(a)?y(new Error("枚举值校验错误")):y()},trigger:"blur"}]});(async()=>{e.value=g.dialogMiddle,D.value=$l,c.value=Cl})();const I=()=>{e.value.fieldJson=al(e.value.fieldName),e.value.columnName=ce(e.value.fieldJson),e.value.comment=ce(e.value.fieldDesc)},C=r=>{const a=e.value.fieldType;return a!=="string"&&r==="LIKE"||a!=="int"&&a!=="time.Time"&&a!=="float64"&&(r==="BETWEEN"||r==="NOT BETWEEN")},p=()=>{e.value.fieldSearchType="",e.value.dictType=""},P=(r,a)=>{const f=(r?me.filter(s=>`${s.name.toLowerCase()}${s.title.toLowerCase()}`.includes(r.toLowerCase())):me).map(s=>({...s,value:s.name.toLowerCase()}));a(f)},K=(r,a)=>{const f=(r?ve.filter(s=>`${s.name.toLowerCase()}${s.title.toLowerCase()}`.includes(r.toLowerCase())):ve).map(s=>({...s,value:s.name.toLowerCase()}));a(f)},T=v(null);return j({fieldDialogForm:T}),(r,a)=>{const y=Vl,f=_e,s=tl,N=fl,O=nl,h=ol,M=El,E=ul,G=sl,Q=ll;return i(),_("div",null,[o(y,{title:"id , created_at , updated_at , deleted_at 会自动生成请勿重复创建。搜索时如果条件为LIKE只支持字符串",type:"warning"}),H("code",null,W(e.value),1),o(Q,{ref_key:"fieldDialogForm",ref:T,model:e.value,"label-width":"120px","label-position":"right",rules:V.value,class:"grid grid-cols-2"},{default:n(()=>[o(s,{label:"字段名称",prop:"fieldName"},{default:n(()=>[o(f,{modelValue:e.value.fieldName,"onUpdate:modelValue":a[0]||(a[0]=l=>e.value.fieldName=l),autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(s,{label:"字段中文名",prop:"fieldDesc"},{default:n(()=>[o(f,{modelValue:e.value.fieldDesc,"onUpdate:modelValue":a[1]||(a[1]=l=>e.value.fieldDesc=l),autocomplete:"off"},{append:n(()=>[o(N,{icon:u(el),onClick:I},null,8,["icon"])]),_:1},8,["modelValue"])]),_:1}),o(s,{label:"字段JSON",prop:"fieldJson"},{default:n(()=>[o(f,{modelValue:e.value.fieldJson,"onUpdate:modelValue":a[2]||(a[2]=l=>e.value.fieldJson=l),autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(s,{label:"数据库字段名",prop:"columnName"},{default:n(()=>[o(f,{modelValue:e.value.columnName,"onUpdate:modelValue":a[3]||(a[3]=l=>e.value.columnName=l),autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(s,{label:"数据库字段描述",prop:"comment"},{default:n(()=>[o(f,{modelValue:e.value.comment,"onUpdate:modelValue":a[4]||(a[4]=l=>e.value.comment=l),autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(s,{label:"字段类型",prop:"fieldType"},{default:n(()=>[o(h,{modelValue:e.value.fieldType,"onUpdate:modelValue":a[5]||(a[5]=l=>e.value.fieldType=l),style:{width:"100%"},placeholder:"请选择字段类型",clearable:"",onChange:p},{default:n(()=>[(i(!0),_(L,null,F(d.typeOptions,l=>(i(),$(O,{key:l.value,label:l.label,value:l.value,disabled:l.disabled},null,8,["label","value","disabled"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(s,{label:e.value.fieldType==="enum"?"枚举值":"类型长度",prop:"dataTypeLong"},{default:n(()=>[o(f,{modelValue:e.value.dataTypeLong,"onUpdate:modelValue":a[6]||(a[6]=l=>e.value.dataTypeLong=l),placeholder:e.value.fieldType==="enum"?"例:'北京','天津'":"数据库类型长度"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(s,{label:"字段查询条件",prop:"fieldSearchType"},{default:n(()=>[o(h,{modelValue:e.value.fieldSearchType,"onUpdate:modelValue":a[7]||(a[7]=l=>e.value.fieldSearchType=l),disabled:e.value.fieldType==="json",style:{width:"100%"},placeholder:"请选择字段查询条件",clearable:""},{default:n(()=>[(i(!0),_(L,null,F(d.typeSearchOptions,l=>(i(),$(O,{key:l.value,label:l.label,value:l.value,disabled:C(l.value)},null,8,["label","value","disabled"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1}),o(s,{label:"关联配置标签",prop:"confSelectTag"},{default:n(()=>[o(M,{modelValue:e.value.confSelectTag,"onUpdate:modelValue":a[8]||(a[8]=l=>e.value.confSelectTag=l),onSelect:console.log,disabled:e.value.fieldType!="int"&&e.value.fieldType!="string","fetch-suggestions":P,clearable:"",class:"inline-input w-50",placeholder:"选择关联配置标签"},null,8,["modelValue","onSelect","disabled"])]),_:1}),o(s,{label:"关联表标签",prop:"apiListSelectTag"},{default:n(()=>[o(M,{modelValue:e.value.apiListSelectTag,"onUpdate:modelValue":a[9]||(a[9]=l=>e.value.apiListSelectTag=l),onSelect:console.log,disabled:e.value.fieldType!=="int","fetch-suggestions":K,clearable:"",class:"inline-input w-50",placeholder:"选择关联表标签"},null,8,["modelValue","onSelect","disabled"])]),_:1}),o(s,{label:"默认值"},{default:n(()=>[o(f,{modelValue:e.value.defaultValue,"onUpdate:modelValue":a[10]||(a[10]=l=>e.value.defaultValue=l),placeholder:"请输入默认值"},null,8,["modelValue"])]),_:1}),o(s,{label:"索引类型",prop:"fieldIndexType"},{default:n(()=>[o(h,{modelValue:e.value.fieldIndexType,"onUpdate:modelValue":a[11]||(a[11]=l=>e.value.fieldIndexType=l),disabled:e.value.fieldType==="json",style:{width:"100%"},placeholder:"请选择字段索引类型",clearable:""},{default:n(()=>[(i(!0),_(L,null,F(d.typeIndexOptions,l=>(i(),$(O,{key:l.value,label:l.label,value:l.value,disabled:C(l.value)},null,8,["label","value","disabled"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1}),o(s,{label:"校验失败文案"},{default:n(()=>[o(f,{modelValue:e.value.errorText,"onUpdate:modelValue":a[12]||(a[12]=l=>e.value.errorText=l)},null,8,["modelValue"])]),_:1}),o(s,{label:"关联字典",prop:"dictType"},{default:n(()=>[o(h,{modelValue:e.value.dictType,"onUpdate:modelValue":a[13]||(a[13]=l=>e.value.dictType=l),style:{width:"100%"},disabled:e.value.fieldType!=="string",placeholder:"请选择字典",clearable:""},{default:n(()=>[(i(!0),_(L,null,F(D.value,l=>(i(),$(O,{key:l.type,label:`${l.type}(${l.name})`,value:l.type},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1}),o(s,{label:"查询搜索"},{default:n(()=>[o(h,{modelValue:e.value.search,"onUpdate:modelValue":a[14]||(a[14]=l=>e.value.search=l),style:{width:"100%"},placeholder:"请选择搜索类型"},{default:n(()=>[(i(!0),_(L,null,F(c.value,l=>(i(),$(O,{key:l.type,label:`${l.type}(${l.name})`,value:l.type},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(s,{label:"隐藏查询条件"},{default:n(()=>[o(E,{modelValue:e.value.fieldSearchHide,"onUpdate:modelValue":a[15]||(a[15]=l=>e.value.fieldSearchHide=l),disabled:!e.value.fieldSearchType},null,8,["modelValue","disabled"])]),_:1}),o(s,{label:"主键"},{default:n(()=>[o(G,{modelValue:e.value.primaryKey,"onUpdate:modelValue":a[16]||(a[16]=l=>e.value.primaryKey=l)},null,8,["modelValue"])]),_:1}),o(s,{label:"前端新建/编辑"},{default:n(()=>[o(E,{modelValue:e.value.form,"onUpdate:modelValue":a[17]||(a[17]=l=>e.value.form=l)},null,8,["modelValue"])]),_:1}),o(s,{label:"前端表格列"},{default:n(()=>[o(E,{modelValue:e.value.table,"onUpdate:modelValue":a[18]||(a[18]=l=>e.value.table=l)},null,8,["modelValue"])]),_:1}),o(s,{label:"前端详情"},{default:n(()=>[o(E,{modelValue:e.value.desc,"onUpdate:modelValue":a[19]||(a[19]=l=>e.value.desc=l)},null,8,["modelValue"])]),_:1}),o(s,{label:"导入/导出"},{default:n(()=>[o(E,{modelValue:e.value.excel,"onUpdate:modelValue":a[20]||(a[20]=l=>e.value.excel=l)},null,8,["modelValue"])]),_:1}),o(s,{label:"是否排序"},{default:n(()=>[o(E,{modelValue:e.value.sort,"onUpdate:modelValue":a[21]||(a[21]=l=>e.value.sort=l)},null,8,["modelValue"])]),_:1}),o(s,{label:"是否必填"},{default:n(()=>[o(E,{modelValue:e.value.require,"onUpdate:modelValue":a[22]||(a[22]=l=>e.value.require=l)},null,8,["modelValue"])]),_:1}),o(s,{label:"是否可清空"},{default:n(()=>[o(E,{modelValue:e.value.clearable,"onUpdate:modelValue":a[23]||(a[23]=l=>e.value.clearable=l)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])])}}}),Bl=Object.freeze(Object.defineProperty({__proto__:null,default:kl},Symbol.toStringTag,{value:"Module"}));export{Cl as S,kl as _,Bl as f};
