import{a4 as ue,ae as ke,au as Se,bb as G,R as Te,C as Me,P as te,A as de,aa as se,N as Q,bc as De,a8 as Ie,bd as Be,ab as Le,be as K,aR as oe,aS as H,d as U,f as V,bf as W,al as w,ac as _e,bg as Ae,X as $e,a7 as ne,bh as Re,M as _,o as P,e as q,g as X,n as k,u as s,t as Pe,w as B,$ as Z,aQ as Fe,b as Oe,an as J,am as fe,Y as me,bi as Ne,bj as ze,D as Ye,ad as Ve,bk as le,K as L,bl as Ue,bm as Xe,Q as xe,L as He,bn as je,bo as ae,aN as Ke,bp as ie,ak as We,a2 as qe,bq as Ge,br as Qe,bs as Ze,ao as Je,bt as et,bu as tt,aw as ot}from"./index.19c0f551.js";import{U as ve}from"./event.776e7e11.js";import{g as st}from"./scroll.fc89f715.js";const nt=(e,t,o)=>{let l={offsetX:0,offsetY:0};const n=i=>{const m=i.clientX,d=i.clientY,{offsetX:f,offsetY:p}=l,h=e.value.getBoundingClientRect(),u=h.left,v=h.top,A=h.width,F=h.height,O=document.documentElement.clientWidth,$=document.documentElement.clientHeight,N=-u+f,z=-v+p,R=O-u-A+f,T=$-v-F+p,E=M=>{const a=Math.min(Math.max(f+M.clientX-m,N),R),b=Math.min(Math.max(p+M.clientY-d,z),T);l={offsetX:a,offsetY:b},e.value&&(e.value.style.transform=`translate(${G(a)}, ${G(b)})`)},g=()=>{document.removeEventListener("mousemove",E),document.removeEventListener("mouseup",g)};document.addEventListener("mousemove",E),document.addEventListener("mouseup",g)},c=()=>{t.value&&e.value&&t.value.addEventListener("mousedown",n)},r=()=>{t.value&&e.value&&t.value.removeEventListener("mousedown",n)};ue(()=>{ke(()=>{o.value?c():r()})}),Se(()=>{r()})},lt=()=>{},at=Array.isArray,it=e=>typeof e=="function",rt=e=>typeof e=="symbol";let ct;function ut(e,t=ct){t&&t.active&&t.effects.push(e)}const dt=e=>{const t=new Set(e);return t.w=0,t.n=0,t},pe=e=>(e.w&S)>0,he=e=>(e.n&S)>0,ft=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=S},mt=e=>{const{deps:t}=e;if(t.length){let o=0;for(let l=0;l<t.length;l++){const n=t[l];pe(n)&&!he(n)?n.delete(e):t[o++]=n,n.w&=~S,n.n&=~S}t.length=o}};let Y=0,S=1;const ee=30;let C;class vt{constructor(t,o=null,l){this.fn=t,this.scheduler=o,this.active=!0,this.deps=[],this.parent=void 0,ut(this,l)}run(){if(!this.active)return this.fn();let t=C,o=x;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=C,C=this,x=!0,S=1<<++Y,Y<=ee?ft(this):re(this),this.fn()}finally{Y<=ee&&mt(this),S=1<<--Y,C=this.parent,x=o,this.parent=void 0,this.deferStop&&this.stop()}}stop(){C===this?this.deferStop=!0:this.active&&(re(this),this.onStop&&this.onStop(),this.active=!1)}}function re(e){const{deps:t}=e;if(t.length){for(let o=0;o<t.length;o++)t[o].delete(e);t.length=0}}let x=!0;function pt(e,t){let o=!1;Y<=ee?he(e)||(e.n|=S,o=!pe(e)):o=!e.has(C),o&&(e.add(C),C.deps.push(e))}function ht(e,t){const o=at(e)?e:[...e];for(const l of o)l.computed&&ce(l);for(const l of o)l.computed||ce(l)}function ce(e,t){(e!==C||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(rt));function j(e){const t=e&&e.__v_raw;return t?j(t):e}function yt(e){x&&C&&(e=j(e),pt(e.dep||(e.dep=dt())))}function gt(e,t){e=j(e);const o=e.dep;o&&ht(o)}var ye;class bt{constructor(t,o,l,n){this._setter=o,this.dep=void 0,this.__v_isRef=!0,this[ye]=!1,this._dirty=!0,this.effect=new vt(t,()=>{this._dirty||(this._dirty=!0,gt(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!n,this.__v_isReadonly=l}get value(){const t=j(this);return yt(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}ye="__v_isReadonly";function Ct(e,t,o=!1){let l,n;const c=it(e);return c?(l=e,n=lt):(l=e.get,n=e.set),new bt(l,n,c||!n,o)}const wt=(e,t={})=>{Te(e)||Me("[useLockscreen]","You need to pass a ref param to this function");const o=t.ns||te("popup"),l=Ct(()=>o.bm("parent","hidden"));if(!de||se(document.body,l.value))return;let n=0,c=!1,r="0";const i=()=>{setTimeout(()=>{Le(document==null?void 0:document.body,l.value),c&&document&&(document.body.style.width=r)},200)};Q(e,m=>{if(!m){i();return}c=!se(document.body,l.value),c&&(r=document.body.style.width),n=st(o.namespace.value);const d=document.documentElement.clientHeight<document.body.scrollHeight,f=De(document.body,"overflowY");n>0&&(d||f==="scroll")&&c&&(document.body.style.width=`calc(100% - ${n}px)`),Ie(document.body,l.value)}),Be(()=>i())},ge=e=>{if(!e)return{onClick:K,onMousedown:K,onMouseup:K};let t=!1,o=!1;return{onClick:r=>{t&&o&&e(r),t=o=!1},onMousedown:r=>{t=r.target===r.currentTarget},onMouseup:r=>{o=r.target===r.currentTarget}}},Et=oe({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:H([String,Array,Object])},zIndex:{type:H([String,Number])}}),kt={click:e=>e instanceof MouseEvent},St="overlay";var Tt=U({name:"ElOverlay",props:Et,emits:kt,setup(e,{slots:t,emit:o}){const l=te(St),n=m=>{o("click",m)},{onClick:c,onMousedown:r,onMouseup:i}=ge(e.customMaskEvent?void 0:n);return()=>e.mask?V("div",{class:[l.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:c,onMousedown:r,onMouseup:i},[w(t,"default")],W.STYLE|W.CLASS|W.PROPS,["onClick","onMouseup","onMousedown"]):_e("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[w(t,"default")])}});const Mt=Tt,be=Symbol("dialogInjectionKey"),Ce=oe({center:Boolean,alignCenter:Boolean,closeIcon:{type:Ae},customClass:{type:String,default:""},draggable:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),Dt={close:()=>!0},It=["aria-level"],Bt=["aria-label"],Lt=["id"],_t=U({name:"ElDialogContent"}),At=U({..._t,props:Ce,emits:Dt,setup(e){const t=e,{t:o}=$e(),{Close:l}=Ne,{dialogRef:n,headerRef:c,bodyId:r,ns:i,style:m}=ne(be),{focusTrapRef:d}=ne(Re),f=_(()=>[i.b(),i.is("fullscreen",t.fullscreen),i.is("draggable",t.draggable),i.is("align-center",t.alignCenter),{[i.m("center")]:t.center},t.customClass]),p=ze(d,n),h=_(()=>t.draggable);return nt(n,c,h),(u,v)=>(P(),q("div",{ref:s(p),class:k(s(f)),style:fe(s(m)),tabindex:"-1"},[X("header",{ref_key:"headerRef",ref:c,class:k(s(i).e("header"))},[w(u.$slots,"header",{},()=>[X("span",{role:"heading","aria-level":u.ariaLevel,class:k(s(i).e("title"))},Pe(u.title),11,It)]),u.showClose?(P(),q("button",{key:0,"aria-label":s(o)("el.dialog.close"),class:k(s(i).e("headerbtn")),type:"button",onClick:v[0]||(v[0]=A=>u.$emit("close"))},[V(s(Oe),{class:k(s(i).e("close"))},{default:B(()=>[(P(),Z(Fe(u.closeIcon||s(l))))]),_:1},8,["class"])],10,Bt)):J("v-if",!0)],2),X("div",{id:s(r),class:k(s(i).e("body"))},[w(u.$slots,"default")],10,Lt),u.$slots.footer?(P(),q("footer",{key:0,class:k(s(i).e("footer"))},[w(u.$slots,"footer")],2)):J("v-if",!0)],6))}});var $t=me(At,[["__file","dialog-content.vue"]]);const Rt=oe({...Ce,appendToBody:Boolean,appendTo:{type:H(String),default:"body"},beforeClose:{type:H(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1},headerAriaLevel:{type:String,default:"2"}}),Pt={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[ve]:e=>Ye(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},Ft=(e,t)=>{var o;const n=He().emit,{nextZIndex:c}=Ve();let r="";const i=le(),m=le(),d=L(!1),f=L(!1),p=L(!1),h=L((o=e.zIndex)!=null?o:c());let u,v;const A=Ue("namespace",je),F=_(()=>{const y={},I=`--${A.value}-dialog`;return e.fullscreen||(e.top&&(y[`${I}-margin-top`]=e.top),e.width&&(y[`${I}-width`]=G(e.width))),y}),O=_(()=>e.alignCenter?{display:"flex"}:{});function $(){n("opened")}function N(){n("closed"),n(ve,!1),e.destroyOnClose&&(p.value=!1)}function z(){n("close")}function R(){v==null||v(),u==null||u(),e.openDelay&&e.openDelay>0?{stop:u}=ae(()=>M(),e.openDelay):M()}function T(){u==null||u(),v==null||v(),e.closeDelay&&e.closeDelay>0?{stop:v}=ae(()=>a(),e.closeDelay):a()}function E(){function y(I){I||(f.value=!0,d.value=!1)}e.beforeClose?e.beforeClose(y):T()}function g(){e.closeOnClickModal&&E()}function M(){!de||(d.value=!0)}function a(){d.value=!1}function b(){n("openAutoFocus")}function D(){n("closeAutoFocus")}function we(y){var I;((I=y.detail)==null?void 0:I.focusReason)==="pointer"&&y.preventDefault()}e.lockScroll&&wt(d);function Ee(){e.closeOnPressEscape&&E()}return Q(()=>e.modelValue,y=>{y?(f.value=!1,R(),p.value=!0,h.value=Xe(e.zIndex)?c():h.value++,xe(()=>{n("open"),t.value&&(t.value.scrollTop=0)})):d.value&&T()}),Q(()=>e.fullscreen,y=>{!t.value||(y?(r=t.value.style.transform,t.value.style.transform=""):t.value.style.transform=r)}),ue(()=>{e.modelValue&&(d.value=!0,p.value=!0,R())}),{afterEnter:$,afterLeave:N,beforeLeave:z,handleClose:E,onModalClick:g,close:T,doClose:a,onOpenAutoFocus:b,onCloseAutoFocus:D,onCloseRequested:Ee,onFocusoutPrevented:we,titleId:i,bodyId:m,closed:f,style:F,overlayDialogStyle:O,rendered:p,visible:d,zIndex:h}},Ot=["aria-label","aria-labelledby","aria-describedby"],Nt=U({name:"ElDialog",inheritAttrs:!1}),zt=U({...Nt,props:Rt,emits:Pt,setup(e,{expose:t}){const o=e,l=Ke();ie({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},_(()=>!!l.title)),ie({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},_(()=>!!o.customClass));const n=te("dialog"),c=L(),r=L(),i=L(),{visible:m,titleId:d,bodyId:f,style:p,overlayDialogStyle:h,rendered:u,zIndex:v,afterEnter:A,afterLeave:F,beforeLeave:O,handleClose:$,onModalClick:N,onOpenAutoFocus:z,onCloseAutoFocus:R,onCloseRequested:T,onFocusoutPrevented:E}=Ft(o,c);We(be,{dialogRef:c,headerRef:r,bodyId:f,ns:n,rendered:u,style:p});const g=ge(N),M=_(()=>o.draggable&&!o.fullscreen);return t({visible:m,dialogContentRef:i}),(a,b)=>(P(),Z(tt,{to:a.appendTo,disabled:a.appendTo!=="body"?!1:!a.appendToBody},[V(et,{name:"dialog-fade",onAfterEnter:s(A),onAfterLeave:s(F),onBeforeLeave:s(O),persisted:""},{default:B(()=>[qe(V(s(Mt),{"custom-mask-event":"",mask:a.modal,"overlay-class":a.modalClass,"z-index":s(v)},{default:B(()=>[X("div",{role:"dialog","aria-modal":"true","aria-label":a.title||void 0,"aria-labelledby":a.title?void 0:s(d),"aria-describedby":s(f),class:k(`${s(n).namespace.value}-overlay-dialog`),style:fe(s(h)),onClick:b[0]||(b[0]=(...D)=>s(g).onClick&&s(g).onClick(...D)),onMousedown:b[1]||(b[1]=(...D)=>s(g).onMousedown&&s(g).onMousedown(...D)),onMouseup:b[2]||(b[2]=(...D)=>s(g).onMouseup&&s(g).onMouseup(...D))},[V(s(Ge),{loop:"",trapped:s(m),"focus-start-el":"container",onFocusAfterTrapped:s(z),onFocusAfterReleased:s(R),onFocusoutPrevented:s(E),onReleaseRequested:s(T)},{default:B(()=>[s(u)?(P(),Z($t,Qe({key:0,ref_key:"dialogContentRef",ref:i},a.$attrs,{"custom-class":a.customClass,center:a.center,"align-center":a.alignCenter,"close-icon":a.closeIcon,draggable:s(M),fullscreen:a.fullscreen,"show-close":a.showClose,title:a.title,"aria-level":a.headerAriaLevel,onClose:s($)}),Ze({header:B(()=>[a.$slots.title?w(a.$slots,"title",{key:1}):w(a.$slots,"header",{key:0,close:s($),titleId:s(d),titleClass:s(n).e("title")})]),default:B(()=>[w(a.$slots,"default")]),_:2},[a.$slots.footer?{name:"footer",fn:B(()=>[w(a.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","aria-level","onClose"])):J("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,Ot)]),_:3},8,["mask","overlay-class","z-index"]),[[Je,s(m)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["to","disabled"]))}});var Yt=me(zt,[["__file","dialog.vue"]]);const xt=ot(Yt);export{xt as E,Mt as a,wt as b,ge as c,nt as u};
